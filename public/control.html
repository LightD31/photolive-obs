<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhotoLive OBS - Control</title>
    <link rel="stylesheet" href="css/control.css">
</head>
<body data-i18n-title="app.control_title">
    <div class="container">
        <header>
            <h1 data-i18n="app.control_title">üì∏ PhotoLive OBS - Control</h1>
            <div class="status">
                <span id="connection-status" class="status-disconnected" data-i18n="status.disconnected">Disconnected</span>
                <span id="images-count" data-i18n="status.images_count">0 images</span>
                <div class="language-selector">
                    <select id="language-select" class="compact-select">
                        <option value="en">English</option>
                        <option value="fr">Fran√ßais</option>
                    </select>
                </div>
            </div>
        </header>

        <main>
            <!-- Three column layout for compact design -->
            <div class="main-layout">
                <!-- Left Column - Current Preview -->
                <div class="left-column">
                    <!-- Current and Next image previews -->
                    <section class="control-section preview-section">
                        <h2 data-i18n="sections.image_previews">üñºÔ∏è Image Previews</h2>
                        <div class="preview-grid">
                            <!-- Current image preview -->
                            <div class="preview-item">
                                <h3 data-i18n="previews.current">Current</h3>
                                <div class="current-preview">
                                    <div id="current-preview-container" class="preview-container">
                                        <img id="current-preview-image" class="preview-image" data-i18n-alt="slideshow.alt_current" alt="Current image" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3C/svg%3E" style="display: none;">
                                        <div class="preview-placeholder">
                                            <span>üñºÔ∏è</span>
                                            <p data-i18n="previews.no_image_selected">No image selected</p>
                                        </div>
                                    </div>
                                    <div class="preview-info">
                                        <span id="current-image-name">-</span>
                                        <span id="current-image-index">0 / 0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Next image preview -->
                            <div class="preview-item">
                                <h3 data-i18n="previews.next">Next</h3>
                                <div class="next-preview">
                                    <div id="next-preview-container" class="preview-container">
                                        <img id="next-preview-image" class="preview-image" data-i18n-alt="slideshow.alt_next" alt="Next image" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3C/svg%3E" style="display: none;">
                                        <div class="preview-placeholder">
                                            <span>‚è≠Ô∏è</span>
                                            <p data-i18n="previews.next_image">Next image</p>
                                        </div>
                                    </div>
                                    <div class="preview-info">
                                        <span id="next-image-name">-</span>
                                        <span id="next-image-index">0 / 0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Playback controls -->
                    <section class="control-section compact">
                        <h2 data-i18n="sections.controls">üéÆ Controls</h2>
                        <div class="control-buttons">
                            <button id="prev-btn" class="btn btn-secondary">‚èÆÔ∏è</button>
                            <button id="play-pause-btn" class="btn btn-primary">‚è∏Ô∏è</button>
                            <button id="next-btn" class="btn btn-secondary">‚è≠Ô∏è</button>
                        </div>
                        <div class="playback-settings">
                            <div class="setting-row">
                                <label for="interval-slider" data-i18n="controls.interval">Interval:</label>
                                <div class="slider-container">
                                    <input type="range" id="interval-slider" min="1" max="30" step="1" value="5">
                                    <span id="interval-value">5s</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Quick settings -->
                    <section class="control-section compact">
                        <h2 data-i18n="sections.quick_settings">‚öôÔ∏è Quick Settings</h2>
                        <div class="quick-settings">

                            <div class="setting-row">
                                <label for="filter-select" data-i18n="settings.filter">Filter:</label>
                                <select id="filter-select" class="compact-select">
                                    <option value="none" data-i18n="filters.none">None</option>
                                    <option value="sepia" data-i18n="filters.sepia">Sepia</option>
                                    <option value="grayscale" data-i18n="filters.grayscale">B&W</option>
                                    <option value="blur" data-i18n="filters.blur">Blur</option>
                                    <option value="brightness" data-i18n="filters.brightness">Bright</option>
                                    <option value="contrast" data-i18n="filters.contrast">Contrast</option>
                                    <option value="vintage" data-i18n="filters.vintage">Vintage</option>
                                    <option value="cool" data-i18n="filters.cool">Cool</option>
                                    <option value="warm" data-i18n="filters.warm">Warm</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label for="transition-select" data-i18n="settings.transition">Transition:</label>
                                <select id="transition-select" class="compact-select">
                                    <option value="none" data-i18n="transitions.none">None</option>
                                    <option value="fade" data-i18n="transitions.fade">Fade</option>
                                    <option value="slide" data-i18n="transitions.slide">Slide</option>
                                    <option value="zoom" data-i18n="transitions.zoom">Zoom</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label data-i18n="settings.corner_radius">Corner Radius:</label>
                                <div class="slider-container">
                                    <input type="range" id="corner-radius" min="0" max="50" step="1" value="0">
                                    <span id="corner-radius-value">0px</span>
                                </div>
                            </div>
                            <div class="setting-row checkbox-row">
                                <label class="checkbox-label compact">
                                    <input type="checkbox" id="shuffle-images">
                                    <span class="checkmark"></span>
                                    <span data-i18n="settings.shuffle">Shuffle</span>
                                </label>
                                <label class="checkbox-label compact">
                                    <input type="checkbox" id="transparent-background">
                                    <span class="checkmark"></span>
                                    <span data-i18n="settings.transparent_bg">Transparent BG</span>
                                </label>
                            </div>
                        </div>
                    </section>

                    <!-- Folder settings -->
                    <section class="control-section compact">
                        <h2 data-i18n="sections.folder_settings">üìÅ Photos Folder</h2>
                        <div class="folder-settings">
                            <div class="path-input-container">
                                <input type="text" id="photos-path" placeholder="Enter photos folder path...">
                                <button id="change-folder-btn" class="btn btn-primary compact" data-i18n="settings.change_folder">Change</button>
                            </div>
                            <div class="folder-options">
                                <label class="checkbox-label compact">
                                    <input type="checkbox" id="recursive-search">
                                    <span class="checkmark"></span>
                                    <span data-i18n="settings.recursive_search">Search subdirectories</span>
                                </label>
                                <label class="checkbox-label compact">
                                    <input type="checkbox" id="repeat-latest">
                                    <span class="checkmark"></span>
                                    Latest only
                                </label>
                                <div class="setting-row compact" id="latest-count-container">
                                    <label for="latest-count">Count:</label>
                                    <div class="slider-container">
                                        <input type="range" id="latest-count" min="1" max="20" step="1" value="5">
                                        <span id="latest-count-value">5</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Watermark settings -->
                    <section class="control-section compact">
                        <h2 data-i18n="sections.watermark_settings">üè∑Ô∏è Watermark</h2>
                        <div class="watermark-settings">
                            <div class="setting-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="watermark-enabled">
                                    <span class="checkmark"></span>
                                    <span data-i18n="settings.enable">Enable</span>
                                </label>
                                <select id="watermark-type" class="compact-select">
                                    <option value="text" data-i18n="watermark.types.text">Text</option>
                                    <option value="image" data-i18n="watermark.types.image">Image</option>
                                </select>
                            </div>
                            
                            <div class="setting-row" id="watermark-text-group">
                                <input type="text" id="watermark-text" value="PhotoLive OBS" data-i18n-placeholder="watermark.text_placeholder" placeholder="Watermark text...">
                            </div>

                            <div class="setting-row hidden" id="watermark-image-group">
                                <div class="file-input-container">
                                    <input type="file" id="watermark-file" accept="image/*" class="file-input" style="display: none;">
                                    <button type="button" id="watermark-browse-btn" class="btn btn-secondary compact" data-i18n="watermark.file_browse">üìÅ Browse...</button>
                                    <span id="watermark-file-name" class="file-name" data-i18n="watermark.no_file_selected">No file selected</span>
                                </div>
                            </div>

                            <div class="setting-row">
                                <select id="watermark-position" class="compact-select">
                                    <option value="top-left" data-i18n="watermark.positions.top-left">Top Left</option>
                                    <option value="top-right" data-i18n="watermark.positions.top-right">Top Right</option>
                                    <option value="bottom-left" data-i18n="watermark.positions.bottom-left">Bottom Left</option>
                                    <option value="bottom-right" selected data-i18n="watermark.positions.bottom-right">Bottom Right</option>
                                    <option value="center" data-i18n="watermark.positions.center">Center</option>
                                </select>
                            </div>
                            
                            <div class="setting-row" id="watermark-size-group">
                                <select id="watermark-size" class="compact-select">
                                    <option value="small" data-i18n="watermark.sizes.small">Small</option>
                                    <option value="medium" selected data-i18n="watermark.sizes.medium">Medium</option>
                                    <option value="large" data-i18n="watermark.sizes.large">Large</option>
                                    <option value="xlarge" data-i18n="watermark.sizes.xlarge">XL</option>
                                </select>
                            </div>

                            <div class="setting-row">
                                <label data-i18n="settings.opacity">Opacity:</label>
                                <div class="slider-container">
                                    <input type="range" id="watermark-opacity" min="10" max="100" step="10" value="80">
                                    <span id="watermark-opacity-value">80%</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Instructions -->
                    <section class="control-section compact collapsible">
                        <h2 class="collapsible-header" data-i18n="sections.instructions">üìñ Instructions <span class="collapse-icon">‚àí</span></h2>
                        <div class="collapsible-content">
                            <div class="instructions compact">
                                <div class="instruction-group">
                                    <strong data-i18n="instructions.obs_setup">OBS Setup:</strong>
                                    <p><span data-i18n="instructions.obs_url_text">Add Browser source with URL:</span> <code id="slideshow-url">http://localhost:3001</code></p>
                                </div>
                                <div class="instruction-group">
                                    <strong data-i18n="instructions.shortcuts">Shortcuts:</strong> <kbd>‚Üí</kbd>/<kbd>Space</kbd> <span data-i18n="controls.next">Next</span>, <kbd>‚Üê</kbd> <span data-i18n="controls.previous">Previous</span>, <kbd>P</kbd> <span data-i18n="controls.pause">Pause</span>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Right Column - Images Grid -->
                <div class="right-column">
                    <!-- Image preview grid -->
                    <section class="control-section full-height">
                        <div class="section-header">
                            <h2 data-i18n="grid.all_images">üñºÔ∏è Images <span id="images-grid-count">0 images</span></h2>
                            <div class="grid-controls">
                                <div class="sort-control">
                                    <span class="sort-label" data-i18n="grid.sort">üìÖ</span>
                                    <div class="sort-buttons">
                                        <button id="sort-desc" class="sort-btn active" data-sort="desc" data-i18n="grid.sort_newest_first" title="Newest First">New</button>
                                        <button id="sort-asc" class="sort-btn" data-sort="asc" data-i18n="grid.sort_oldest_first" title="Oldest First">Old</button>
                                    </div>
                                </div>
                                <div class="zoom-control">
                                    <span class="zoom-label" data-i18n="grid.zoom">üîç</span>
                                    <div class="zoom-buttons">
                                        <button id="zoom-small" class="zoom-btn" data-zoom="1" title="Small">S</button>
                                        <button id="zoom-normal" class="zoom-btn active" data-zoom="2" title="Normal">M</button>
                                        <button id="zoom-large" class="zoom-btn" data-zoom="3" title="Large">L</button>
                                        <button id="zoom-xlarge" class="zoom-btn" data-zoom="4" title="Extra Large">XL</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="images-preview" class="images-grid compact">
                            <!-- Images will be added dynamically -->
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/control.js"></script>
</body>
</html>
