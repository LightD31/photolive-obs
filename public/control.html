<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhotoLive OBS - Control</title>
    <link rel="stylesheet" href="css/control.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üì∏ PhotoLive OBS - Control</h1>
            <div class="status">
                <span id="connection-status" class="status-disconnected">Disconnected</span>
                <span id="images-count">0 images</span>
            </div>
        </header>

        <main>
            <!-- Three column layout for compact design -->
            <div class="main-layout">
                <!-- Left Column - Current Preview -->
                <div class="left-column">
                    <!-- Current image preview -->
                    <section class="control-section preview-section">
                        <h2>üñºÔ∏è Current Preview</h2>
                        <div class="current-preview">
                            <div id="current-preview-container" class="preview-container">
                                <img id="current-preview-image" class="preview-image" alt="Current image" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3C/svg%3E" style="display: none;">
                                <div class="preview-placeholder">
                                    <span>üñºÔ∏è</span>
                                    <p>No image selected</p>
                                </div>
                            </div>
                            <div class="preview-info">
                                <span id="current-image-name">-</span>
                                <span id="current-image-index">0 / 0</span>
                            </div>
                        </div>
                    </section>

                    <!-- Playback controls -->
                    <section class="control-section compact">
                        <h2>üéÆ Controls</h2>
                        <div class="control-buttons">
                            <button id="prev-btn" class="btn btn-secondary">‚èÆÔ∏è</button>
                            <button id="play-pause-btn" class="btn btn-primary">‚è∏Ô∏è</button>
                            <button id="next-btn" class="btn btn-secondary">‚è≠Ô∏è</button>
                        </div>
                        <div class="playback-settings">
                            <div class="setting-row">
                                <label for="interval-slider">Interval:</label>
                                <div class="slider-container">
                                    <input type="range" id="interval-slider" min="1" max="30" step="1" value="5">
                                    <span id="interval-value">5s</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Quick settings -->
                    <section class="control-section compact">
                        <h2>‚öôÔ∏è Quick Settings</h2>
                        <div class="quick-settings">

                            <div class="setting-row">
                                <label for="filter-select">Filter:</label>
                                <select id="filter-select" class="compact-select">
                                    <option value="none">None</option>
                                    <option value="sepia">Sepia</option>
                                    <option value="grayscale">B&W</option>
                                    <option value="blur">Blur</option>
                                    <option value="brightness">Bright</option>
                                    <option value="contrast">Contrast</option>
                                    <option value="vintage">Vintage</option>
                                    <option value="cool">Cool</option>
                                    <option value="warm">Warm</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label for="transition-select">Transition:</label>
                                <select id="transition-select" class="compact-select">
                                    <option value="none">None</option>
                                    <option value="fade">Fade</option>
                                    <option value="slide">Slide</option>
                                    <option value="zoom">Zoom</option>
                                </select>
                            </div>
                            <div class="setting-row checkbox-row">
                                <label class="checkbox-label compact">
                                    <input type="checkbox" id="shuffle-images">
                                    <span class="checkmark"></span>
                                    Shuffle
                                </label>
                                <label class="checkbox-label compact">
                                    <input type="checkbox" id="transparent-background">
                                    <span class="checkmark"></span>
                                    Transparent BG
                                </label>
                            </div>
                        </div>
                    </section>

                    <!-- Folder settings -->
                    <section class="control-section compact">
                        <h2>üìÅ Photos Folder</h2>
                        <div class="folder-settings">
                            <div class="path-input-container">
                                <input type="text" id="photos-path" placeholder="Enter photos folder path...">
                                <button id="change-folder-btn" class="btn btn-primary compact">Change</button>
                            </div>
                            <div class="folder-options">
                                <label class="checkbox-label compact">
                                    <input type="checkbox" id="repeat-latest">
                                    <span class="checkmark"></span>
                                    Latest only
                                </label>
                                <div class="setting-row compact" id="latest-count-container">
                                    <label for="latest-count">Count:</label>
                                    <div class="slider-container">
                                        <input type="range" id="latest-count" min="1" max="20" step="1" value="5">
                                        <span id="latest-count-value">5</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Watermark settings -->
                    <section class="control-section compact">
                        <h2>üè∑Ô∏è Watermark</h2>
                        <div class="watermark-settings">
                            <div class="setting-row">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="watermark-enabled">
                                    <span class="checkmark"></span>
                                    Enable
                                </label>
                                <select id="watermark-type" class="compact-select">
                                    <option value="text">Text</option>
                                    <option value="image">Image</option>
                                </select>
                            </div>
                            
                            <div class="setting-row" id="watermark-text-group">
                                <input type="text" id="watermark-text" value="PhotoLive OBS" placeholder="Watermark text...">
                            </div>

                            <div class="setting-row hidden" id="watermark-image-group">
                                <div class="file-input-container">
                                    <input type="file" id="watermark-file" accept="image/*" class="file-input" style="display: none;">
                                    <button type="button" id="watermark-browse-btn" class="btn btn-secondary compact">üìÅ Browse...</button>
                                    <span id="watermark-file-name" class="file-name">No file selected</span>
                                </div>
                            </div>

                            <div class="setting-row">
                                <select id="watermark-position" class="compact-select">
                                    <option value="top-left">Top Left</option>
                                    <option value="top-right">Top Right</option>
                                    <option value="bottom-left">Bottom Left</option>
                                    <option value="bottom-right" selected>Bottom Right</option>
                                    <option value="center">Center</option>
                                </select>
                            </div>
                            
                            <div class="setting-row" id="watermark-size-group">
                                <select id="watermark-size" class="compact-select">
                                    <option value="small">Small</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="large">Large</option>
                                    <option value="xlarge">XL</option>
                                </select>
                            </div>

                            <div class="setting-row">
                                <label>Opacity:</label>
                                <div class="slider-container">
                                    <input type="range" id="watermark-opacity" min="10" max="100" step="10" value="80">
                                    <span id="watermark-opacity-value">80%</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Instructions -->
                    <section class="control-section compact collapsible">
                        <h2 class="collapsible-header">üìñ Instructions <span class="collapse-icon">‚àí</span></h2>
                        <div class="collapsible-content">
                            <div class="instructions compact">
                                <div class="instruction-group">
                                    <strong>OBS Setup:</strong>
                                    <p>Add Browser source with URL: <code id="slideshow-url">http://localhost:3001</code></p>
                                </div>
                                <div class="instruction-group">
                                    <strong>Shortcuts:</strong> <kbd>‚Üí</kbd>/<kbd>Space</kbd> Next, <kbd>‚Üê</kbd> Previous, <kbd>P</kbd> Pause
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Right Column - Images Grid -->
                <div class="right-column">
                    <!-- Image preview grid -->
                    <section class="control-section full-height">
                        <div class="section-header">
                            <h2>üñºÔ∏è Images <span id="images-grid-count">0 images</span></h2>
                            <div class="zoom-control">
                                <span class="zoom-label">üîç</span>
                                <div class="zoom-buttons">
                                    <button id="zoom-small" class="zoom-btn" data-zoom="1" title="Petit">S</button>
                                    <button id="zoom-normal" class="zoom-btn active" data-zoom="2" title="Normal">M</button>
                                    <button id="zoom-large" class="zoom-btn" data-zoom="3" title="Grand">L</button>
                                    <button id="zoom-xlarge" class="zoom-btn" data-zoom="4" title="Tr√®s grand">XL</button>
                                </div>
                            </div>
                        </div>
                        <div id="images-preview" class="images-grid compact">
                            <!-- Images will be added dynamically -->
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/control.js"></script>
</body>
</html>
